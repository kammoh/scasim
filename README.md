# SCASIM

Tools for simulation-based side-channel leakage assessment.

**Note:** This is a work in progress.


## Running TVLA
Step 1: Run simulations. Example command using cocotb testbench `keccak/sca/KeccakCore_tb.py`:

```bash
run_tvla.py path_to_filelist --test-module keccak.sca.KeccakCore_tb --test-cases sha3_256_test --multi 20 --num-tests=100000
```

`path_to_filelist` should be the path to a file with one of the following formats:
- a text file with ".f" extension, containing the paths to the source files of the design, one path per line.
- a JSON file with ".json" extension, containing a "sources" key with the list of source files as its value, and optionally a "top" key with the top module name. This is compatible with Xeda's design file format.

Step 2 generates the following files:
- One waveform file for each batch run, each including `--num-tests` (100000) traces of the waveform. The number of files is equal to the argument given for `--multi`.
- A ".meta.json" file containing metadata about the simulation, one for each batch run.
- A ".meta.list" file containing the paths to all the ".meta.json" files generated by the previous step.

Step 2: Analyzing the waveforms generated by the simulation. The following command will run 1st and 2nd order t-tests on the waveforms generated by the previous step:

```bash
cargo run --release --bin=tvla -d 2 --num-threads 4 --plot --show --use-existing --ttest-output-dir KeccakCore_d1 --meta-list path_to_meta_list
``` 